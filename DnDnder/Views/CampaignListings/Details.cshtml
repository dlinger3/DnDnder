@model Tavern.Models.CampaignListing
@using Tavern.Models
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Details";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<h1>@Html.DisplayFor(model => model.Campaign.CampaignName)</h1>

<html>
    <body>
        <div>
            <h4>@Html.DisplayFor(model => model.Campaign.WorldName)</h4>
            <hr />
            
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            Campaign Details
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            @Html.DisplayFor(model => model.Campaign.Details)
                        </td>
                    </tr>
                </tbody>
            </table>

            <table class="table">
                <thead>
                    <tr>
                        <th colspan="3">Current Players</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- ViewData is coming from controller: CampaignListing, Action: Details (HTTP GET) -->
                    @if(@ViewData["CharacterList"] != null)
                    {
                        @foreach(var item in @ViewData["CharacterList"] as List<Character>)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.Class)
                                </td>

                                <td>
                                    @Html.DisplayFor(modelItem => item.Level)
                                </td>
                            </tr>
                   
                        }
                    }
                    else
                    {
                        <tr>
                            <td>
                                No active players currently.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
            <div>
                <input type="button" class="btn btn-primary" value="View Chat" onclick="location.href='@Url.Action("GroupMessages","CampaignListings",new {id = @Model.Id})'" />
                <input type="button" class="btn btn-primary" value="Back To List" onclick="location.href='@Url.Action("Index","CampaignListings")'" />
            </div>
        </div>
    </body>
</html>

